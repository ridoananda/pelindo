import{q as b,j as e,a as k,f as y}from"./app-5uYfbFD_.js";import{M as R}from"./MainLayout-CL2HDE20.js";import{P as D}from"./PageHeader-ZxeNOBG7.js";import{T as l}from"./Table-B5egPbpB.js";import{B as o}from"./Button-BW1FQsdI.js";function C({risks:i,riskReports:d,reportType:r,reportDate:c,reportPeriod:m,managerName:h}){const{url:p}=b(),x=[{header:"Jenis Risiko",accessor:"type"},{header:"Dampak",accessor:"impact"},{header:"Status",accessor:"status"},{header:"Rekomendasi",accessor:"recommendation"}],j=[{header:"Tanggal Laporan",accessor:"report_date"},{header:"Jenis Risiko",accessor:"risk_type"},{header:"Deskripsi",accessor:"description"},{header:"Tindakan yang Direkomendasikan",accessor:"recommended_action"}],f=()=>{window.print()},n=w=>{const a=new URL(window.location.origin+p);a.searchParams.set("format",w);const v=a.pathname+a.search;y.get(v,{},{preserveState:!0,preserveScroll:!0,onSuccess:s=>{s.props.flash&&s.props.flash.report_url?window.open(s.props.flash.report_url,"_blank"):s.props.flash&&s.props.flash.error?alert(`Error generating report: ${s.props.flash.error}`):alert("Report generation requested. If download does not start, the server may not have provided a download URL.")},onError:s=>{const t=Object.keys(s)[0],N=t?s[t]:"Unknown error.";alert(`Failed to request downloadable report: ${N}`),console.error("Report download request errors:",s)}})},u=()=>{n("pdf")},g=()=>{n("excel")};return e.jsxs(R,{children:[e.jsx(k,{title:r}),e.jsx(D,{title:r}),e.jsx("div",{className:"p-8",children:e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Jenis Laporan:"}),e.jsx("p",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tanggal Laporan:"}),e.jsx("p",{className:"font-semibold",children:c})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Periode Laporan:"}),e.jsx("p",{className:"font-semibold",children:m})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Daftar Risiko"}),e.jsx(l,{columns:x,data:i}),e.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Laporan Insiden Risiko"}),e.jsx(l,{columns:j,data:d})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nama Manajer Operasional:"}),e.jsx("p",{className:"font-semibold",children:h})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"white",onClick:f,children:"Preview"}),e.jsx(o,{onClick:u,children:"Download PDF"}),e.jsx(o,{variant:"secondary",onClick:g,children:"Download Excel"})]})]})})})]})}export{C as default};
