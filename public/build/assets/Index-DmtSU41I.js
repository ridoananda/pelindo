import{r as o,S as J,f as b,j as e,a as q}from"./app-JPd7-MDz.js";import{M as K}from"./MainLayout-BRdvmUMu.js";import{P as I}from"./PageHeader-CoA7Cj9I.js";import{T as H}from"./Table-BfNmKdbL.js";import{B as i}from"./Button-BWH-8Ech.js";import{M as O}from"./Modal-CE_rP1HX.js";import"./transition-CYuYb3wZ.js";function G({cargoActivities:f,filters:m={}}){const[v,d]=o.useState(!1),[c,x]=o.useState(!1),[j,y]=o.useState(null),[u,w]=o.useState(m.search||""),[n,k]=o.useState(m.status||"Semua"),[N,h]=o.useState(!1),{data:r,setData:a,post:M,put:S,errors:t,reset:g,processing:p}=J({ship_name:"",type:"Bongkar",cargo_type:"",quantity:"",unit:"Ton",operator:"",time:"",status:"Dalam Proses",notes:""});o.useEffect(()=>{const s=setTimeout(()=>{h(!0),b.get(route("cargo-activities.index"),{search:u,status:n!=="Semua"?n:""},{preserveState:!0,replace:!0,only:["cargoActivities"],onFinish:()=>h(!1)})},300);return()=>clearTimeout(s)},[u,n]);const C={Selesai:"bg-green-100 text-green-800","Dalam Proses":"bg-blue-100 text-blue-800",Tertunda:"bg-amber-100 text-amber-800",Dibatalkan:"bg-red-100 text-red-800"},T=[{header:"Nama Kapal",accessor:"ship_name"},{header:"Jenis Aktivitas",accessor:"type",cell:s=>e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${s==="Bongkar"?"bg-sky-100 text-sky-800":"bg-orange-100 text-orange-800"}`,children:s})},{header:"Jenis Muatan",accessor:"cargo_type"},{header:"Jumlah",accessor:"quantity",cell:(s,P)=>`${s} ${P.unit}`},{header:"Operator",accessor:"operator"},{header:"Jam",accessor:"time"},{header:"Status",accessor:"status",cell:s=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C[s]||"bg-gray-100 text-gray-800"}`,children:s})}],A=f,_=()=>{g(),a({ship_name:"",type:"Bongkar",cargo_type:"",quantity:"",unit:"Ton",operator:"",time:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),status:"Dalam Proses",notes:""}),x(!1),d(!0)},B=s=>{x(!0),y(s),a({ship_name:s.ship_name,type:s.type,cargo_type:s.cargo_type,quantity:s.quantity,unit:s.unit,operator:s.operator,time:s.time,status:s.status,notes:s.notes||""}),d(!0)},l=()=>{d(!1),g()},D=s=>{s.preventDefault(),c?S(route("cargo-activities.update",j.id),{onSuccess:()=>{l()}}):M(route("cargo-activities.store"),{onSuccess:()=>{l()}})},L=s=>{confirm("Apakah Anda yakin ingin menghapus data aktivitas ini?")&&b.delete(route("cargo-activities.destroy",s.id))},E=["Semua","Dalam Proses","Selesai","Tertunda","Dibatalkan"];return e.jsxs(K,{children:[e.jsx(q,{title:"Bongkar Muat"}),e.jsx(I,{title:"Aktivitas Bongkar Muat",description:"Kelola semua aktivitas bongkar muat barang di pelabuhan.",pattern:"waves",actions:e.jsxs(i,{onClick:_,className:"bg-white !text-blue-800 hover:bg-blue-100 hover:!text-white transition-colors shadow-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Tambah Aktivitas"]})}),e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsx("div",{className:"flex items-center space-x-2",children:E.map(s=>e.jsx("button",{onClick:()=>k(s),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${n===s?"bg-blue-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s},s))}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Cari aktivitas...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm",value:u,onChange:s=>w(s.target.value)})]})]}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 relative",children:[N&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Mencari..."})]})}),e.jsx(H,{columns:T,data:A,actions:s=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(i,{variant:"white",size:"sm",onClick:()=>B(s),className:"border border-gray-300 hover:bg-gray-100",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(i,{variant:"danger",size:"sm",onClick:()=>L(s),className:"bg-red-600 text-white hover:bg-red-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hapus"]})]})})]})]})})}),e.jsx(O,{show:v,onClose:l,title:c?"Edit Aktivitas Bongkar Muat":"Tambah Aktivitas Bongkar Muat",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Kapal"}),e.jsx("input",{type:"text",value:r.ship_name,onChange:s=>a("ship_name",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: KM Jaya Abadi"}),t.ship_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.ship_name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Aktivitas"}),e.jsxs("select",{value:r.type,onChange:s=>a("type",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"Bongkar",children:"Bongkar"}),e.jsx("option",{value:"Muat",children:"Muat"})]}),t.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Muatan"}),e.jsx("input",{type:"text",value:r.cargo_type,onChange:s=>a("cargo_type",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: Kontainer, Semen, Pupuk"}),t.cargo_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.cargo_type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jumlah"}),e.jsx("input",{type:"number",value:r.quantity,onChange:s=>a("quantity",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: 1000"}),t.quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.quantity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Satuan"}),e.jsxs("select",{value:r.unit,onChange:s=>a("unit",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"Ton",children:"Ton"}),e.jsx("option",{value:"TEUs",children:"TEUs (Kontainer)"}),e.jsx("option",{value:"Unit",children:"Unit"}),e.jsx("option",{value:"M3",children:"M3 (Kubik)"}),e.jsx("option",{value:"Karung",children:"Karung"})]}),t.unit&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.unit})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator/PBM"}),e.jsx("input",{type:"text",value:r.operator,onChange:s=>a("operator",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: PT. Maju Jaya Logistik"}),t.operator&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.operator})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam"}),e.jsx("input",{type:"time",value:r.time,onChange:s=>a("time",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),t.time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:s=>a("status",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"Dalam Proses",children:"Dalam Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"}),e.jsx("option",{value:"Tertunda",children:"Tertunda"}),e.jsx("option",{value:"Dibatalkan",children:"Dibatalkan"})]}),t.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catatan (Opsional)"}),e.jsx("textarea",{value:r.notes,onChange:s=>a("notes",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",rows:"3",placeholder:"Informasi tambahan mengenai aktivitas..."}),t.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.notes})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(i,{variant:"white",onClick:l,className:"border border-gray-300",children:"Batal"}),e.jsx(i,{type:"submit",disabled:p,className:"bg-blue-700 hover:bg-blue-800 text-white",children:p?"Menyimpan...":c?"Update Aktivitas":"Simpan Aktivitas"})]})]})})]})}export{G as default};
