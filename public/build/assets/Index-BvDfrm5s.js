import{r as s,S as I,j as e,a as J,f as F}from"./app-BA6xctcn.js";import{M as O,t as r}from"./MainLayout-DM9qhyGW.js";import{P as H}from"./PageHeader-C2IBvfNU.js";import{T as W}from"./Table-BaOBvU73.js";import{B as n}from"./Button-D_zsYIT9.js";import{M as Y}from"./Modal-DZgN8cvF.js";import{g as z,C as R,a as G,b as K,B as U,p as V,e as Z,f as $}from"./index-aRL1fA8D.js";import"./transition-X0ymHIAP.js";R.register(G,K,U,V,Z,$);function oe({productions:g}){const[j,p]=s.useState(!1),[h,x]=s.useState(!1),[y,w]=s.useState(null),[l,v]=s.useState(""),[i,k]=s.useState(new Date().getFullYear().toString()),{data:d,setData:o,post:_,put:N,errors:a,reset:b,processing:f}=I({production_date:new Date().toISOString().slice(0,10),production_type:"Import",grain_type:"",grain_weight:""}),C=[{header:"Tanggal Produksi",accessor:"production_date",cell:t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})},{header:"Jenis Produksi",accessor:"production_type"},{header:"Jenis Biji-bijian",accessor:"grain_type"},{header:"Berat Biji-bijian (Ton)",accessor:"grain_weight",cell:t=>t}],c=s.useMemo(()=>g.filter(t=>new Date(t.production_date).getFullYear().toString()===i).filter(t=>t.production_type.toLowerCase().includes(l.toLowerCase())||t.grain_type.toLowerCase().includes(l.toLowerCase())),[g,l,i]),M=s.useMemo(()=>{const t=Array(12).fill(0);return c.forEach(m=>{const A=new Date(m.production_date).getMonth();t[A]+=parseFloat(m.grain_weight)||0}),t},[c]),S={labels:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],datasets:[{label:`Total Berat Biji-bijian (Ton) (${i})`,data:M,backgroundColor:r.colors.primary[600],borderColor:r.colors.primary[800],borderWidth:1,borderRadius:5}]},B={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:r.colors.neutral[700]}},title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Total Berat Biji-bijian (Ton)",color:r.colors.neutral[600]},ticks:{color:r.colors.neutral[600]},grid:{color:r.colors.neutral[200]}},x:{ticks:{color:r.colors.neutral[600]},grid:{display:!1}}}},P=()=>{b(),o({production_date:new Date().toISOString().slice(0,10),production_type:"Import",grain_type:"",grain_weight:""}),x(!1),p(!0)},D=t=>{x(!0),w(t),o({production_date:t.production_date,production_type:t.production_type,grain_type:t.grain_type,grain_weight:t.grain_weight}),p(!0)},u=()=>{p(!1),b()},L=t=>{t.preventDefault(),h?N(route("productions.update",y.id),{onSuccess:()=>u()}):_(route("productions.store"),{onSuccess:()=>u()})},T=t=>{confirm("Apakah Anda yakin ingin menghapus data produksi ini?")&&F.delete(route("productions.destroy",t.id))},E=Array.from({length:5},(t,m)=>new Date().getFullYear()-m);return e.jsxs(O,{children:[e.jsx(J,{title:"Data Produksi"}),e.jsx(H,{title:"Manajemen Produksi Pelabuhan",description:"Kelola dan pantau semua aktivitas produksi barang di fasilitas pelabuhan.",pattern:"compass",actions:e.jsxs(n,{onClick:P,className:"bg-white !text-blue-800 hover:bg-blue-100 hover:!text-white transition-colors shadow-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Tambah Data Produksi"]})}),e.jsxs("div",{className:"p-8 bg-gray-50",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Grafik Produksi Bulanan"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Menampilkan total output produksi (Ton) per bulan untuk tahun ",i,"."]}),e.jsx("div",{className:"h-80 md:h-96",children:e.jsx(z,{data:S,options:B})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"year-filter",className:"sr-only",children:"Tahun"}),e.jsx("select",{id:"year-filter",value:i,onChange:t=>k(t.target.value),className:"py-2 pl-3 pr-8 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm text-sm",children:E.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"text-gray-700 font-medium",children:["Total Data: ",e.jsx("span",{className:"text-blue-700 font-semibold",children:c.length})]})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Cari data produksi...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm",value:l,onChange:t=>v(t.target.value)})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsx(W,{columns:C,data:c,actions:t=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(n,{variant:"white",size:"sm",onClick:()=>D(t),className:"border border-gray-300 hover:bg-gray-100",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(n,{variant:"danger",size:"sm",onClick:()=>T(t),className:"bg-red-600 text-white hover:bg-red-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hapus"]})]})})})]})})]}),e.jsx(Y,{show:j,onClose:u,title:h?"Edit Data Produksi":"Tambah Data Produksi",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Produksi"}),e.jsx("input",{type:"date",value:d.production_date,onChange:t=>o("production_date",t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.production_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.production_date})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Produksi"}),e.jsx("input",{type:"text",value:d.production_type,onChange:t=>o("production_type",t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: Import, Export, Pengolahan Lokal"}),a.production_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.production_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Biji-bijian"}),e.jsx("input",{type:"text",value:d.grain_type,onChange:t=>o("grain_type",t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: Gandum, Jagung, Kedelai"}),a.grain_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.grain_type})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Berat Biji-bijian (Ton)"}),e.jsx("input",{type:"number",step:"0.01",value:d.grain_weight,onChange:t=>o("grain_weight",t.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: 1000"}),a.grain_weight&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.grain_weight})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(n,{variant:"white",onClick:u,className:"border border-gray-300",children:"Batal"}),e.jsx(n,{type:"submit",disabled:f,className:"bg-blue-700 hover:bg-blue-800 text-white",children:f?"Menyimpan...":h?"Update Produksi":"Simpan Produksi"})]})]})})]})}export{oe as default};
