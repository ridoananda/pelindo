import{r as t,S as u,j as e,a as j}from"./app-CEQaBxJJ.js";import{M as N,t as d}from"./MainLayout-DlWmQ6As.js";import{P as k}from"./PageHeader-UYuFX5Qa.js";import{T as y}from"./Table-B9qzE-6v.js";import{P as f,g as v,C as w,a as M,b as R,B as _,A as C,p as L,e as T,f as A}from"./index-gX9qXDS4.js";w.register(M,R,_,C,L,T,A);function q({risks:P,riskStatus:O,riskReports:E,riskStats:S,riskAssessments:r,fmeaAnalysisSummary:s}){const[D,B]=t.useState(!1),[I,K]=t.useState(!1),[F,H]=t.useState(null),[n,W]=t.useState(""),[i,J]=t.useState("Semua"),[x,p]=t.useState("analysis");u({respondent_name:"",respondent_job:"Manajer Bistek Operasional",risk_code:"",risk_description:"",severity:1,occurrence:1,detection:1});const h=[{header:"Kode",accessor:"kode",cell:a=>e.jsx("span",{className:"font-mono font-bold text-purple-700",children:a})},{header:"Deskripsi",accessor:"deskripsi",cell:a=>e.jsx("div",{className:"max-w-xs whitespace-normal break-words text-sm",children:a})},{header:"Avg S",accessor:"avg_severity",cell:a=>e.jsx("span",{className:"font-bold text-blue-600",children:a})},{header:"Avg O",accessor:"avg_occurrence",cell:a=>e.jsx("span",{className:"font-bold text-green-600",children:a})},{header:"Avg D",accessor:"avg_detection",cell:a=>e.jsx("span",{className:"font-bold text-orange-600",children:a})},{header:"RPN",accessor:"avg_rpn",cell:a=>e.jsx("span",{className:"font-extrabold text-lg text-gray-800",children:a})},{header:"Tingkat Risiko",accessor:"tingkat_risiko",cell:a=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${a==="Tinggi"?"bg-red-500 text-white":a==="Sedang"?"bg-yellow-500 text-white":"bg-green-500 text-white"}`,children:a})}];t.useMemo(()=>!r||!Array.isArray(r)?[]:r.filter(a=>{const l=a.respondent_name.toLowerCase().includes(n.toLowerCase())||a.risk_code.toLowerCase().includes(n.toLowerCase())||a.risk_description.toLowerCase().includes(n.toLowerCase()),b=i==="Semua"||a.respondent_job===i;return l&&b}),[r,n,i]);const o=t.useMemo(()=>{const a={Tinggi:0,Sedang:0,Rendah:0};return s&&Array.isArray(s)&&s.forEach(l=>{a.hasOwnProperty(l.tingkat_risiko)&&a[l.tingkat_risiko]++}),a},[s]),g={labels:Object.keys(o),datasets:[{data:Object.values(o),backgroundColor:["#ef4444","#f59e0b","#10b981"],borderColor:"#ffffff",borderWidth:3}]},m={labels:s&&Array.isArray(s)?s.slice(0,10).map(a=>a.kode):[],datasets:[{label:"Risk Priority Number (RPN)",data:s&&Array.isArray(s)?s.slice(0,10).map(a=>a.avg_rpn):[],backgroundColor:s&&Array.isArray(s)?s.slice(0,10).map(a=>a.tingkat_risiko==="Tinggi"?"#ef4444":a.tingkat_risiko==="Sedang"?"#f59e0b":"#10b981"):[],borderColor:"#374151",borderWidth:1}]},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:d.colors.neutral[700],font:{size:12}}},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:d.colors.neutral[600]},grid:{color:d.colors.neutral[200]}},x:{ticks:{color:d.colors.neutral[600]},grid:{display:!1}}}};return e.jsxs(N,{children:[e.jsx(j,{title:"FMEA Analysis - Analisis Risiko"}),e.jsx(k,{title:"Manajemen Risiko",subtitle:"Kelola dan pantau risiko operasional pelabuhan",breadcrumb:[{label:"Dashboard",href:"/dashboard"},{label:"Risiko",current:!0}]}),e.jsxs("div",{className:"p-8 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Distribusi Tingkat Risiko"}),e.jsx("div",{className:"h-64",children:Object.values(o).some(a=>a>0)?e.jsx(f,{data:g,options:c}):e.jsx("p",{className:"text-gray-500 text-center pt-24",children:"Tidak ada data untuk ditampilkan"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top 10 Risk Priority Number (RPN)"}),e.jsx("div",{className:"h-64",children:s&&s.length>0?e.jsx(v,{data:m,options:c}):e.jsx("p",{className:"text-gray-500 text-center pt-24",children:"Tidak ada data untuk ditampilkan"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:e.jsx("button",{onClick:()=>p("analysis"),className:`py-4 px-1 border-b-2 font-medium text-sm ${x==="analysis"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Hasil Analisis FMEA"})})}),e.jsx("div",{className:"p-6",children:e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Hasil Analisis FMEA"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Ringkasan analisis risiko berdasarkan rata-rata penilaian responden"}),e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-blue-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Keterangan Metode FMEA"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-3 rounded-md border-l-4 border-blue-500",children:[e.jsx("strong",{className:"text-blue-900",children:"Severity (S):"}),e.jsx("p",{className:"text-blue-800 mt-1",children:"Seberapa parah dampak jika risiko terjadi"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border-l-4 border-green-500",children:[e.jsx("strong",{className:"text-green-900",children:"Occurrence (O):"}),e.jsx("p",{className:"text-green-800 mt-1",children:"Seberapa sering risiko kemungkinan terjadi"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-md border-l-4 border-orange-500",children:[e.jsx("strong",{className:"text-orange-900",children:"Detection (D):"}),e.jsx("p",{className:"text-orange-800 mt-1",children:"Seberapa mudah risiko dapat dideteksi"})]})]}),e.jsx("div",{className:"mt-3 text-center bg-white p-2 rounded-md",children:e.jsx("strong",{className:"text-gray-900",children:"Risk Priority Number (RPN) = S × O × D"})})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsx(y,{columns:h,data:s||[]})}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-red-50 to-orange-50 rounded-xl border border-red-200 p-6",children:[e.jsxs("h4",{className:"text-xl font-bold text-red-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})}),"HASIL FMEA TINGKAT RISIKO OPERASIONAL PELABUHAN"]}),e.jsx("p",{className:"text-red-800 mb-6 font-medium",children:"Hasil mitigasi risiko dengan tingkat risiko tertinggi berdasarkan perhitungan RPN."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-white rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-red-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-sm",children:"Kode"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-sm",children:"Mode Kegagalan"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-sm",children:"RPN"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-sm",children:"Mitigasi Risiko"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M01"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Data peti kemas tidak tercatat atau salah"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-red-600 bg-red-100 px-3 py-1 rounded-full",children:"196,92"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Wajibkan semua petugas menerima dokumen muatan resmi dari pihak pelayaran sebelum kegiatan dimulai."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M04"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Jadwal kapal tumpang tindih"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:"151,25"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Terapkan sistem jadwal berbasis shift harian tetap dan larangan perubahan mendadak tanpa persetujuan."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M05"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Kapal pandu tidak tersedia saat dibutuhkan"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:"153,90"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Buat sistem giliran kerja dan siaga (standby) bagi kapal pandu di jam sibuk atau waktu padat sandar."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M07"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Laporan tidak terkirim tepat waktu"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:"156,24"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Tetapkan jam batas pelaporan harian di SOP dan beri teguran resmi jika melewati batas waktu."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M08"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Data kapal dan peti kemas tidak sinkron"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-red-600 bg-red-100 px-3 py-1 rounded-full",children:"197,39"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Buat tim verifikasi gabungan dari divisi kapal dan logistik yang bertugas mencocokkan data sebelum bongkar."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M09"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Kecelakaan kerja saat bongkar muat"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:"155,02"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Wajibkan briefing keselamatan sebelum shift dimulai dan pengawasan langsung oleh mandor tiap kegiatan."})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"font-mono font-bold text-purple-700 bg-purple-100 px-2 py-1 rounded",children:"M20"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:"Informasi status kapal tidak seragam"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full",children:"155,60"})}),e.jsx("td",{className:"px-4 py-4 text-gray-700 text-sm",children:"Buat daftar istilah status kapal resmi dan adakan pelatihan setiap bulan untuk semua petugas operasional."})]})]})]})})]})]})})]})]})]})}export{q as default};
