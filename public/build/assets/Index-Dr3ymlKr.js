import{r,S as z,j as e,a as _,f as R}from"./app-BAQ4-NRv.js";import{t as s,M as $}from"./MainLayout-DWnZ5q35.js";import{P as U}from"./PageHeader-dQ1AmDGd.js";import{T as V}from"./Table-DxS0TQ7q.js";import{B as d}from"./Button-CopqyLjc.js";import{M as Z}from"./Modal-CVdCPnt7.js";import{L as q,P as G,C as Q,a as X,b as ee,B as ae,c as se,d as te,p as re,e as le,f as oe,A as ne,i as ie}from"./index-CYOZA_oc.js";import"./transition-BWi4b6hZ.js";Q.register(X,ee,ae,se,te,re,le,oe,ne,ie);function be({logistics:c}){const[M,g]=r.useState(!1),[x,f]=r.useState(!1),[C,L]=r.useState(null),[i,D]=r.useState(""),[o,S]=r.useState(new Date().getFullYear()),[p,B]=r.useState(new Date().getMonth()+1),{data:u,setData:n,post:K,put:P,errors:l,reset:v,processing:j}=z({name:"",category:"Peralatan Kantor",status:"Masuk",date:new Date().toISOString().slice(0,10)}),A={Masuk:"bg-sky-100 text-sky-800",Keluar:"bg-orange-100 text-orange-800"},T=[{header:"Nama Barang",accessor:"name"},{header:"Kategori",accessor:"category"},{header:"Status",accessor:"status",cell:a=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A[a]||"bg-gray-100 text-gray-800"}`,children:a})},{header:"Tanggal",accessor:"date",cell:a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}],m=r.useMemo(()=>c.filter(a=>{const t=new Date(a.date);return t.getFullYear()===parseInt(o)&&t.getMonth()+1===parseInt(p)}).filter(a=>a.name.toLowerCase().includes(i.toLowerCase())||a.category.toLowerCase().includes(i.toLowerCase())||a.status.toLowerCase().includes(i.toLowerCase())),[c,i,o,p]),y=r.useMemo(()=>{const a=Array(12).fill(0).map(()=>({masuk:0,keluar:0}));return c.forEach(t=>{const w=new Date(t.date);if(w.getFullYear()===parseInt(o)){const N=w.getMonth();t.status==="Masuk"?a[N].masuk+=1:t.status==="Keluar"&&(a[N].keluar+=1)}}),a},[c,o]),E={labels:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],datasets:[{label:"Barang Masuk (Jumlah Transaksi)",data:y.map(a=>a.masuk),borderColor:s.colors.primary[500],backgroundColor:`${s.colors.primary[500]}33`,fill:!0,tension:.3},{label:"Barang Keluar (Jumlah Transaksi)",data:y.map(a=>a.keluar),borderColor:s.colors.secondary[500],backgroundColor:`${s.colors.secondary[500]}33`,fill:!0,tension:.3}]},b=r.useMemo(()=>{const a={};return m.forEach(t=>{a[t.category]=(a[t.category]||0)+1}),a},[m]),O={labels:Object.keys(b),datasets:[{data:Object.values(b),backgroundColor:[s.colors.primary[500],s.colors.secondary[500],s.colors.accent.warning,s.colors.primary[300],s.colors.secondary[300],s.colors.accent.info],borderColor:s.colors.neutral.white,borderWidth:2}]},k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:s.colors.neutral[700]}},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:s.colors.neutral[600]},grid:{color:s.colors.neutral[200]}},x:{ticks:{color:s.colors.neutral[600]},grid:{display:!1}}}},I=()=>{v(),n({name:"",category:"Peralatan Kantor",status:"Masuk",date:new Date().toISOString().slice(0,10)}),f(!1),g(!0)},F=a=>{f(!0),L(a),n({name:a.name,category:a.category,status:a.status,date:a.date}),g(!0)},h=()=>{g(!1),v()},J=a=>{a.preventDefault(),x?P(route("logistics.update",C.id),{onSuccess:()=>h()}):K(route("logistics.store"),{onSuccess:()=>h()})},H=a=>{confirm("Apakah Anda yakin ingin menghapus data logistik ini?")&&R.delete(route("logistics.destroy",a.id))},Y=Array.from({length:5},(a,t)=>new Date().getFullYear()-t),W=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}];return e.jsxs($,{children:[e.jsx(_,{title:"Manajemen Logistik"}),e.jsx(U,{title:"Manajemen Logistik Pelabuhan",description:"Pantau dan kelola arus barang, stok, dan distribusi logistik.",pattern:"compass",actions:e.jsxs(d,{onClick:I,className:"bg-white !text-blue-800 hover:bg-blue-100 hover:!text-white transition-colors shadow-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Tambah Data Logistik"]})}),e.jsxs("div",{className:"p-8 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-md",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Arus Barang Tahunan (",o,")"]}),e.jsx("div",{className:"h-72 md:h-80",children:e.jsx(q,{data:E,options:k})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Distribusi Kategori Barang"}),e.jsx("div",{className:"h-72 md:h-80 flex items-center justify-center",children:Object.keys(b).length>0?e.jsx(G,{data:O,options:{...k,maintainAspectRatio:!1}}):e.jsx("p",{className:"text-gray-500 text-center",children:"Tidak ada data untuk ditampilkan pada periode ini."})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"month-filter",className:"sr-only",children:"Bulan"}),e.jsx("select",{id:"month-filter",value:p,onChange:a=>B(a.target.value),className:"py-2 pl-3 pr-8 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm text-sm",children:W.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"year-filter",className:"sr-only",children:"Tahun"}),e.jsx("select",{id:"year-filter",value:o,onChange:a=>S(a.target.value),className:"py-2 pl-3 pr-8 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm text-sm",children:Y.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"text-gray-700 font-medium",children:["Total: ",e.jsx("span",{className:"text-blue-700 font-semibold",children:m.length})," item"]})]}),e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Cari logistik...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm",value:i,onChange:a=>D(a.target.value)})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200",children:e.jsx(V,{columns:T,data:m,actions:a=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(d,{variant:"white",size:"sm",onClick:()=>F(a),className:"border border-gray-300 hover:bg-gray-100",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(d,{variant:"danger",size:"sm",onClick:()=>H(a),className:"bg-red-600 text-white hover:bg-red-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hapus"]})]})})})]})})]}),e.jsx(Z,{show:M,onClose:h,title:x?"Edit Data Logistik":"Tambah Data Logistik",children:e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Barang/Peralatan"}),e.jsx("input",{type:"text",value:u.name,onChange:a=>n("name",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Contoh: Komputer PC, Tali Tambat, Oli Mesin"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),e.jsxs("select",{value:u.category,onChange:a=>n("category",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"Peralatan Kantor",children:"Peralatan Kantor"}),e.jsx("option",{value:"Suku Cadang Kapal",children:"Suku Cadang Kapal"}),e.jsx("option",{value:"Alat Berat",children:"Alat Berat"}),e.jsx("option",{value:"Bahan Bakar",children:"Bahan Bakar"}),e.jsx("option",{value:"Perlengkapan Keselamatan",children:"Perlengkapan Keselamatan"}),e.jsx("option",{value:"Material Konstruksi",children:"Material Konstruksi"}),e.jsx("option",{value:"Lainnya",children:"Lainnya"})]}),l.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Transaksi"}),e.jsxs("select",{value:u.status,onChange:a=>n("status",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"Masuk",children:"Masuk (Pembelian/Penerimaan)"}),e.jsx("option",{value:"Keluar",children:"Keluar (Penggunaan/Pengiriman)"})]}),l.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Transaksi"}),e.jsx("input",{type:"date",value:u.date,onChange:a=>n("date",a.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),l.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.date})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(d,{variant:"white",onClick:h,className:"border border-gray-300",children:"Batal"}),e.jsx(d,{type:"submit",disabled:j,className:"bg-blue-700 hover:bg-blue-800 text-white",children:j?"Menyimpan...":x?"Update Data":"Simpan Data"})]})]})})]})}export{be as default};
